# –°–∏—Å—Ç–µ–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞ —Ç—É—Ä–Ω–∏—Ä—ã

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–≥—Ä–æ–∫–∞–º —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ —Ç—É—Ä–Ω–∏—Ä—ã —á–µ—Ä–µ–∑ Telegram Mini App –≤ –¥–≤—É—Ö —Ä–µ–∂–∏–º–∞—Ö:
1. **"–ò—â—É –ø–∞—Ä—É"** - –∏–≥—Ä–æ–∫ –∏—â–µ—Ç –Ω–∞–ø–∞—Ä–Ω–∏–∫–∞ —Å—Ä–µ–¥–∏ –¥—Ä—É–≥–∏—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
2. **"–° –Ω–∞–ø–∞—Ä–Ω–∏–∫–æ–º"** - –∏–≥—Ä–æ–∫ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è —Å—Ä–∞–∑—É —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –∏–≥—Ä–æ–∫–æ–º

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### Backend

#### –ú–æ–¥–µ–ª–∏ (`apps/tournaments/registration_models.py`)

**TournamentRegistration**
- `player` - –∏–≥—Ä–æ–∫
- `partner` - –Ω–∞–ø–∞—Ä–Ω–∏–∫ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `team` - –∫–æ–º–∞–Ω–¥–∞ (—Å–æ–∑–¥–∞—ë—Ç—Å—è –ø—Ä–∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–∏ –ø–∞—Ä—ã)
- `status` - —Å—Ç–∞—Ç—É—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:
  - `looking_for_partner` - –∏—â–µ—Ç –ø–∞—Ä—É
  - `invited` - –ø–æ–ª—É—á–∏–ª –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ
  - `main_list` - –æ—Å–Ω–æ–≤–Ω–æ–π —Å–æ—Å—Ç–∞–≤
  - `reserve_list` - —Ä–µ–∑–µ—Ä–≤–Ω—ã–π —Å–ø–∏—Å–æ–∫
- `registration_order` - –ø–æ—Ä—è–¥–æ–∫ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (–¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞)

**PairInvitation**
- `sender` - –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
- `receiver` - –ø–æ–ª—É—á–∞—Ç–µ–ª—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
- `tournament` - —Ç—É—Ä–Ω–∏—Ä
- `status` - —Å—Ç–∞—Ç—É—Å:
  - `pending` - –æ–∂–∏–¥–∞–µ—Ç –æ—Ç–≤–µ—Ç–∞
  - `accepted` - –ø—Ä–∏–Ω—è—Ç–æ
  - `declined` - –æ—Ç–∫–ª–æ–Ω–µ–Ω–æ
  - `cancelled` - –æ—Ç–º–µ–Ω–µ–Ω–æ
- `message` - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

#### –°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π (`apps/tournaments/services/registration_service.py`)

**RegistrationService** –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–µ—Ç–æ–¥—ã:

1. **register_looking_for_partner(tournament, player)**
   - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ —Ä–µ–∂–∏–º–µ "–ò—â—É –ø–∞—Ä—É"
   - –ò–≥—Ä–æ–∫ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ —Å–ø–∏—Å–æ–∫ –∏—â—É—â–∏—Ö –ø–∞—Ä—É

2. **register_with_partner(tournament, player, partner)**
   - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å –Ω–∞–ø–∞—Ä–Ω–∏–∫–æ–º
   - –°–æ–∑–¥–∞—ë—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –¥–ª—è –æ–±–æ–∏—Ö –∏–≥—Ä–æ–∫–æ–≤
   - –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É –∏–ª–∏ —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—É—é
   - –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å (–æ—Å–Ω–æ–≤–Ω–æ–π —Å–æ—Å—Ç–∞–≤ / —Ä–µ–∑–µ—Ä–≤)
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –Ω–∞–ø–∞—Ä–Ω–∏–∫—É

3. **send_pair_invitation(tournament, sender, receiver, message)**
   - –û—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –≤ –ø–∞—Ä—É
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –æ–±–∞ –∏–≥—Ä–æ–∫–∞ –∏—â—É—Ç –ø–∞—Ä—É
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—É—á–∞—Ç–µ–ª—é

4. **accept_pair_invitation(invitation)**
   - –ü—Ä–∏–Ω—è—Ç–∏–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
   - –°–æ–∑–¥–∞—ë—Ç –∫–æ–º–∞–Ω–¥—É –∏–∑ –¥–≤—É—Ö –∏–≥—Ä–æ–∫–æ–≤
   - –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π
   - –û—Ç–º–µ–Ω—è–µ—Ç –¥—Ä—É–≥–∏–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –æ–±–æ–∏—Ö –∏–≥—Ä–æ–∫–æ–≤
   - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç —Å TournamentEntry
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—é

5. **decline_pair_invitation(invitation)**
   - –û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª—É—á–∞—Ç–µ–ª—è –≤ —Å—Ç–∞—Ç—É—Å "–ò—â—É –ø–∞—Ä—É"

6. **cancel_registration(tournament, player)**
   - –û—Ç–º–µ–Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
   - –£–¥–∞–ª—è–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∏–≥—Ä–æ–∫–∞ –∏ –Ω–∞–ø–∞—Ä–Ω–∏–∫–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å)
   - –£–¥–∞–ª—è–µ—Ç TournamentEntry
   - –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å—ã –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

7. **update_tournament_max_teams(tournament, new_max_teams)**
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
   - –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å—ã –≤—Å–µ—Ö —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞

#### API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã (`apps/telegram_bot/api_views.py`)

**–°–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤:**
```
GET /api/mini-app/tournaments/{id}/participants/
```
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
```json
{
  "main_list": [...],
  "reserve_list": [...],
  "looking_for_partner": [...]
}
```

**–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è "–ò—â—É –ø–∞—Ä—É":**
```
POST /api/mini-app/tournaments/{id}/register-looking-for-partner/
```

**–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å –Ω–∞–ø–∞—Ä–Ω–∏–∫–æ–º:**
```
POST /api/mini-app/tournaments/{id}/register-with-partner/
Body: {"partner_id": 123}
```

**–û—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è:**
```
POST /api/mini-app/tournaments/{id}/send-invitation/
Body: {"receiver_id": 123, "message": "–î–∞–≤–∞–π —Å—ã–≥—Ä–∞–µ–º!"}
```

**–°–ø–∏—Å–æ–∫ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π:**
```
GET /api/mini-app/invitations/
```

**–ü—Ä–∏–Ω—è—Ç–∏–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è:**
```
POST /api/mini-app/invitations/{id}/accept/
```

**–û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è:**
```
POST /api/mini-app/invitations/{id}/decline/
```

**–û—Ç–º–µ–Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:**
```
POST /api/mini-app/tournaments/{id}/cancel-registration/
```

### Frontend

#### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

**TournamentParticipants** (`frontend/src/components/MiniApp/TournamentParticipants.tsx`)
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Ç—É—Ä–Ω–∏—Ä–∞
- –†–∞–∑–¥–µ–ª—è–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–æ—Å—Ç–∞–≤, —Ä–µ–∑–µ—Ä–≤ –∏ –∏—â—É—â–∏—Ö –ø–∞—Ä—É
- –ö–Ω–æ–ø–∫–∞ "–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å" –¥–ª—è –∏—â—É—â–∏—Ö –ø–∞—Ä—É

**RegistrationModal** (`frontend/src/components/MiniApp/RegistrationModal.tsx`)
- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ —Ä–µ–∂–∏–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- –§–æ—Ä–º–∞ –≤–≤–æ–¥–∞ ID –Ω–∞–ø–∞—Ä–Ω–∏–∫–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**InvitationsModal** (`frontend/src/components/MiniApp/InvitationsModal.tsx`)
- –°–ø–∏—Å–æ–∫ –≤—Ö–æ–¥—è—â–∏—Ö –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π
- –ö–Ω–æ–ø–∫–∏ –ø—Ä–∏–Ω—è—Ç—å/–æ—Ç–∫–ª–æ–Ω–∏—Ç—å
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–π

#### –°—Ç—Ä–∞–Ω–∏—Ü—ã

**MiniAppTournamentDetail** - –æ–±–Ω–æ–≤–ª–µ–Ω–∞:
- –°–µ–∫—Ü–∏—è "–£—á–∞—Å—Ç–Ω–∏–∫–∏" (—Å–≤–æ—Ä–∞—á–∏–≤–∞–µ–º–∞—è)
- –ö–Ω–æ–ø–∫–∞ "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è" ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç RegistrationModal
- –ö–Ω–æ–ø–∫–∞ "–û—Ç–º–µ–Ω–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é" –¥–ª—è –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö

**MiniAppInvitations** - –Ω–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞:
- –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è–º–∏
- –î–æ—Å—Ç—É–ø–Ω–∞ –ø–æ `/mini-app/invitations`

**MiniAppHome** - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞:
- "–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è" ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π

#### API –∫–ª–∏–µ–Ω—Ç (`frontend/src/api/miniApp.ts`)

–î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–∏–ø—ã:
- `TournamentRegistration`
- `PairInvitation`
- `TournamentParticipants`

–î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã:
- `getTournamentParticipants()`
- `registerLookingForPartner()`
- `registerWithPartner()`
- `sendPairInvitation()`
- `getMyInvitations()`
- `acceptInvitation()`
- `declineInvitation()`
- `cancelRegistration()`

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

#### Celery –∑–∞–¥–∞—á–∏ (`apps/telegram_bot/tasks.py`)

1. **send_pair_invitation_notification(invitation_id)**
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—É—á–∞—Ç–µ–ª—é –æ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–∏
   - –°—Å—ã–ª–∫–∞ –Ω–∞ Mini App –¥–ª—è –æ—Ç–≤–µ—Ç–∞

2. **send_invitation_accepted_notification(invitation_id)**
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—é –æ –ø—Ä–∏–Ω—è—Ç–∏–∏

3. **send_partner_registration_notification(registration_id)**
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –Ω–∞–ø–∞—Ä–Ω–∏–∫—É –æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
   - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ (–æ—Å–Ω–æ–≤–Ω–æ–π —Å–æ—Å—Ç–∞–≤ / —Ä–µ–∑–µ—Ä–≤)

4. **send_status_changed_notification(registration_id, old_status, new_status)**
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –æ–±–æ–∏–º –∏–≥—Ä–æ–∫–∞–º –ø–∞—Ä—ã
   - –û—Å–æ–±–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –∏–∑ —Ä–µ–∑–µ—Ä–≤–∞ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–æ—Å—Ç–∞–≤

#### NotificationService (`apps/telegram_bot/services/notifications.py`)

–î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã:
- `notify_pair_invitation()` - –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –≤ –ø–∞—Ä—É
- `notify_invitation_accepted()` - –ø—Ä–∏–Ω—è—Ç–∏–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
- `notify_partner_registration()` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞–ø–∞—Ä–Ω–∏–∫–æ–º
- `notify_status_changed()` - –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞

## –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è "–ò—â—É –ø–∞—Ä—É"

1. –ò–≥—Ä–æ–∫ A –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ç—É—Ä–Ω–∏—Ä –≤ Mini App
2. –ù–∞–∂–∏–º–∞–µ—Ç "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è"
3. –í—ã–±–∏—Ä–∞–µ—Ç "–ò—â—É –ø–∞—Ä—É"
4. –°–æ–∑–¥–∞—ë—Ç—Å—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `looking_for_partner`
5. –ò–≥—Ä–æ–∫ A –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ "–ò—â—É—Ç –ø–∞—Ä—É"

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –≤ –ø–∞—Ä—É

1. –ò–≥—Ä–æ–∫ B –≤–∏–¥–∏—Ç –∏–≥—Ä–æ–∫–∞ A –≤ —Å–ø–∏—Å–∫–µ "–ò—â—É—Ç –ø–∞—Ä—É"
2. –ù–∞–∂–∏–º–∞–µ—Ç "–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å"
3. –°–æ–∑–¥–∞—ë—Ç—Å—è –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `pending`
4. –ò–≥—Ä–æ–∫ A –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram
5. –ò–≥—Ä–æ–∫ A –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Å—Ç–∞—Ç—É—Å `invited`

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ü—Ä–∏–Ω—è—Ç–∏–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è

1. –ò–≥—Ä–æ–∫ A –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π
2. –í–∏–¥–∏—Ç –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –æ—Ç –∏–≥—Ä–æ–∫–∞ B
3. –ù–∞–∂–∏–º–∞–µ—Ç "–ü—Ä–∏–Ω—è—Ç—å"
4. –°–æ–∑–¥–∞—ë—Ç—Å—è –∏–ª–∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞ A+B
5. –û–±–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—É—á–∞—é—Ç —Å—Ç–∞—Ç—É—Å `main_list` –∏–ª–∏ `reserve_list`
6. –°–æ–∑–¥–∞—ë—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ TournamentEntry (–µ—Å–ª–∏ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–æ—Å—Ç–∞–≤)
7. –ò–≥—Ä–æ–∫ B –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø—Ä–∏–Ω—è—Ç–∏–∏
8. –í—Å–µ –¥—Ä—É–≥–∏–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –æ–±–æ–∏—Ö –∏–≥—Ä–æ–∫–æ–≤ –æ—Ç–º–µ–Ω—è—é—Ç—Å—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å –Ω–∞–ø–∞—Ä–Ω–∏–∫–æ–º

1. –ò–≥—Ä–æ–∫ C –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ç—É—Ä–Ω–∏—Ä
2. –í—ã–±–∏—Ä–∞–µ—Ç "–° –Ω–∞–ø–∞—Ä–Ω–∏–∫–æ–º"
3. –í–≤–æ–¥–∏—Ç ID –∏–≥—Ä–æ–∫–∞ D
4. –°–æ–∑–¥–∞—é—Ç—Å—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –¥–ª—è –æ–±–æ–∏—Ö —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `main_list` –∏–ª–∏ `reserve_list`
5. –°–æ–∑–¥–∞—ë—Ç—Å—è –∏–ª–∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞ C+D
6. –ò–≥—Ä–æ–∫ D –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
7. –°–æ–∑–¥–∞—ë—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ TournamentEntry (–µ—Å–ª–∏ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–æ—Å—Ç–∞–≤)

### –°—Ü–µ–Ω–∞—Ä–∏–π 5: –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

1. –û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä –∏–∑–º–µ–Ω—è–µ—Ç `planned_participants` —Å 8 –Ω–∞ 10
2. –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `update_tournament_max_teams()`
3. –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è —Å—Ç–∞—Ç—É—Å—ã –≤—Å–µ—Ö —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π
4. –î–≤–µ –ø–∞—Ä—ã –∏–∑ —Ä–µ–∑–µ—Ä–≤–∞ –ø–µ—Ä–µ—Ö–æ–¥—è—Ç –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–æ—Å—Ç–∞–≤
5. –≠—Ç–∏ –ø–∞—Ä—ã –ø–æ–ª—É—á–∞—é—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è üéâ
6. –°–æ–∑–¥–∞—é—Ç—Å—è –∑–∞–ø–∏—Å–∏ –≤ TournamentEntry –¥–ª—è –Ω–æ–≤—ã—Ö –ø–∞—Ä

## –í–∞–∂–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥

–°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º:
- –ò—â–µ—Ç Team —Å player_1=A, player_2=B
- –ò—â–µ—Ç Team —Å player_1=B, player_2=A
- –°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—É—é —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞

–≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –≤ –±–∞–∑–µ.

### –ü–æ—Ä—è–¥–æ–∫ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

`registration_order` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø—Ä–∏ –ø–µ—Ä–µ—Å—á—ë—Ç–µ —Å—Ç–∞—Ç—É—Å–æ–≤:
- –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ "–ò—â—É –ø–∞—Ä—É" - –∞–≤—Ç–æ–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç
- –ü—Ä–∏ –ø—Ä–∏–Ω—è—Ç–∏–∏ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è - –±–µ—Ä—ë—Ç—Å—è –æ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è
- –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å –Ω–∞–ø–∞—Ä–Ω–∏–∫–æ–º - –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –¥–ª—è –æ–±–æ–∏—Ö

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å TournamentEntry

TournamentEntry —Å–æ–∑–¥–∞—ë—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–∞—Ä –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Å–æ—Å—Ç–∞–≤–µ:
- –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –≤ `main_list` - —Å–æ–∑–¥–∞—ë—Ç—Å—è –∑–∞–ø–∏—Å—å
- –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –≤ `reserve_list` - —É–¥–∞–ª—è–µ—Ç—Å—è –∑–∞–ø–∏—Å—å
- –ü—Ä–∏ –æ—Ç–º–µ–Ω–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ - —É–¥–∞–ª—è–µ—Ç—Å—è –∑–∞–ø–∏—Å—å

### –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π

–û–¥–∏–Ω –∏–≥—Ä–æ–∫ = –æ–¥–Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ —Ç—É—Ä–Ω–∏—Ä:
- Constraint –Ω–∞ —É—Ä–æ–≤–Ω–µ –ë–î: `unique_together = ['tournament', 'player']`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ —Å–µ—Ä–≤–∏—Å–µ –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏

```bash
docker-compose exec web python manage.py makemigrations tournaments
docker-compose exec web python manage.py migrate tournaments
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ API

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è "–ò—â—É –ø–∞—Ä—É":
```bash
curl -X POST http://localhost:8000/api/mini-app/tournaments/1/register-looking-for-partner/ \
  -H "X-Telegram-Init-Data: ..."
```

2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ:
```bash
curl -X POST http://localhost:8000/api/mini-app/tournaments/1/send-invitation/ \
  -H "X-Telegram-Init-Data: ..." \
  -H "Content-Type: application/json" \
  -d '{"receiver_id": 2, "message": "–î–∞–≤–∞–π —Å—ã–≥—Ä–∞–µ–º!"}'
```

3. –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π:
```bash
curl http://localhost:8000/api/mini-app/invitations/ \
  -H "X-Telegram-Init-Data: ..."
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

1. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ Celery –∑–∞–ø—É—â–µ–Ω:
```bash
docker-compose logs -f celery
```

2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Django shell:
```python
from apps.telegram_bot.tasks import send_pair_invitation_notification
send_pair_invitation_notification.delay(1)
```

## –ê–¥–º–∏–Ω–∫–∞

–í Django Admin –¥–æ–±–∞–≤–ª–µ–Ω—ã:
- **TournamentRegistration** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è–º–∏
  - –§–∏–ª—å—Ç—Ä—ã –ø–æ —Å—Ç–∞—Ç—É—Å—É –∏ —Ç—É—Ä–Ω–∏—Ä—É
  - –ü–æ–∏—Å–∫ –ø–æ –∏–≥—Ä–æ–∫–∞–º
  - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –ø–æ—Ä—è–¥–∫—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

- **PairInvitation** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è–º–∏
  - –§–∏–ª—å—Ç—Ä—ã –ø–æ —Å—Ç–∞—Ç—É—Å—É –∏ —Ç—É—Ä–Ω–∏—Ä—É
  - –ü–æ–∏—Å–∫ –ø–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—é –∏ –ø–æ–ª—É—á–∞—Ç–µ–ª—é
  - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è

## –î–∞–ª—å–Ω–µ–π—à–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–¥–±–æ—Ä –ø–∞—Ä—ã**
   - –ê–ª–≥–æ—Ä–∏—Ç–º –ø–æ–¥–±–æ—Ä–∞ –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É
   - –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã

2. **–ß–∞—Ç –º–µ–∂–¥—É –∏–≥—Ä–æ–∫–∞–º–∏**
   - –û–±—Å—É–∂–¥–µ–Ω–∏–µ –¥–µ—Ç–∞–ª–µ–π –ø–µ—Ä–µ–¥ –ø—Ä–∏–Ω—è—Ç–∏–µ–º –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è

3. **–ò—Å—Ç–æ—Ä–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π**
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç—É—Ä–Ω–∏—Ä–∞–º
   - –ß–∞—Å—Ç—ã–µ –Ω–∞–ø–∞—Ä–Ω–∏–∫–∏

4. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏**
   - WebSocket –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
   - Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Mini App

5. **–†–µ–π—Ç–∏–Ω–≥–æ–≤—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**
   - –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π/–º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥ –¥–ª—è —É—á–∞—Å—Ç–∏—è
   - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–Ω–∏—Ü—ã —Ä–µ–π—Ç–∏–Ω–≥–æ–≤ –≤ –ø–∞—Ä–µ
