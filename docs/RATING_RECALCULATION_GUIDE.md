# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø–æ–ª–Ω–æ–º—É –ø–µ—Ä–µ—Å—á–µ—Ç—É —Ä–µ–π—Ç–∏–Ω–≥–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã BP

## ‚ö†Ô∏è –í–ê–ñ–ù–û: –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

**–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û —Å–æ–∑–¥–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –ë–î –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º!**

```bash
# –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é PostgreSQL
pg_dump -U postgres -h localhost -d sandmatch > backup_$(date +%Y%m%d_%H%M%S).sql
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ (DRY RUN)

–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —á—Ç–æ –±—É–¥–µ—Ç —Å–¥–µ–ª–∞–Ω–æ –ë–ï–ó –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö:

```bash
python scripts/full_rating_recalculation.py --dry-run
```

### 2. –ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ—Å—á–µ—Ç

–í—ã–ø–æ–ª–Ω–∏—Ç—å –≤—Å–µ —à–∞–≥–∏:

```bash
python scripts/full_rating_recalculation.py
```

–°–∫—Ä–∏–ø—Ç –∑–∞–ø—Ä–æ—Å–∏—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã.

## üìù –û–ø–∏—Å–∞–Ω–∏–µ —à–∞–≥–æ–≤

### –®–∞–≥ 1: –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Ä–µ–π—Ç–∏–Ω–≥–∞
- –£–¥–∞–ª—è–µ—Ç –≤—Å–µ –∑–∞–ø–∏—Å–∏ –∏–∑ `PlayerRatingDynamic`
- –£–¥–∞–ª—è–µ—Ç –≤—Å–µ –∑–∞–ø–∏—Å–∏ –∏–∑ `PlayerRatingHistory`
- –û–±–Ω—É–ª—è–µ—Ç `current_rating` —É –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ BTR
- –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤ —Å–æ —Å–≤—è–∑—å—é —Å BTR
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å—Ç–∞—Ä—Ç–æ–≤—ã–π —Ä–µ–π—Ç–∏–Ω–≥ –ø–æ —Ç–∞–±–ª–∏—Ü–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è BTR‚ÜíBP

### –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤ –¥–ª—è –∏–≥—Ä–æ–∫–æ–≤ –±–µ–∑ BTR
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —É—á–∞—Å—Ç–∏–µ –≤ —Ç—É—Ä–Ω–∏—Ä–∞—Ö HARD/MEDIUM
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥:
  - **1050** - —á–∞—Å—Ç–æ –∏–≥—Ä–∞–ª –≤ HARD (‚â•3 –º–∞—Ç—á–µ–π)
  - **950** - —á–∞—Å—Ç–æ –∏–≥—Ä–∞–ª –≤ MEDIUM (‚â•3 –º–∞—Ç—á–µ–π)
  - **1000** - –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∏–≥—Ä–∞–≤—à–∏–µ

### –®–∞–≥ 4: –ü–µ—Ä–µ—Å—á–µ—Ç –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤ —Ç—É—Ä–Ω–∏—Ä–æ–≤
- –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –¥–ª—è –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö —Ç—É—Ä–Ω–∏—Ä–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ñ–æ—Ä–º—É–ª—É: `avg_rating`, `participants_count`, `prize_fund`

### –®–∞–≥ 5: –ü–µ—Ä–µ—Å—á–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥–∞ –ø–æ —Ç—É—Ä–Ω–∏—Ä–∞–º
- –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç—É—Ä–Ω–∏—Ä—ã –æ—Ç —Å—Ç–∞—Ä—ã—Ö –∫ –Ω–æ–≤—ã–º
- –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç—É—Ä–Ω–∏—Ä–∞ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥ –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- –£—á–∏—Ç—ã–≤–∞–µ—Ç `is_out_of_competition`

## üéØ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏

### –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ —à–∞–≥–∏

```bash
# –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —à–∞–≥ 1 (–æ—á–∏—Å—Ç–∫—É)
python scripts/full_rating_recalculation.py --skip-step 1

# –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —à–∞–≥–æ–≤
python scripts/full_rating_recalculation.py --skip-step 1 --skip-step 2
```

## üìä –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```
================================================================================
  –ü–û–õ–ù–´–ô –ü–ï–†–ï–°–ß–ï–¢ –†–ï–ô–¢–ò–ù–ì–û–í–û–ô –°–ò–°–¢–ï–ú–´ BP
================================================================================

‚ö†Ô∏è  –í–ù–ò–ú–ê–ù–ò–ï: –≠—Ç–æ –¥–µ—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è!
   –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–æ–∑–¥–∞–ª–∏ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –ë–î!

   –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å? (yes/no): yes

================================================================================
  –®–ê–ì 1: –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö —Ä–µ–π—Ç–∏–Ω–≥–∞
================================================================================

üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–µ—Ä–µ–¥ –æ—á–∏—Å—Ç–∫–æ–π:
   - PlayerRatingDynamic –∑–∞–ø–∏—Å–µ–π: 1523
   - PlayerRatingHistory –∑–∞–ø–∏—Å–µ–π: 8456
   - –ò–≥—Ä–æ–∫–æ–≤ —Å —Ä–µ–π—Ç–∏–Ω–≥–æ–º > 0: 342

üóëÔ∏è  –£–¥–∞–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö...
‚úÖ –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Ä–µ–π—Ç–∏–Ω–≥–∞ –æ—á–∏—â–µ–Ω—ã

... (–æ—Å—Ç–∞–ª—å–Ω—ã–µ —à–∞–≥–∏)

================================================================================
  –ó–ê–í–ï–†–®–ï–ù–û
================================================================================
‚è±Ô∏è  –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: 0:02:34

‚úÖ –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!
   –†–µ–π—Ç–∏–Ω–≥–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Å—á–∏—Ç–∞–Ω–∞
```

## üîÑ –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

–°–∫—Ä–∏–ø—Ç –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ. –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –∑–∞–ø—É—Å–∫–µ:
1. –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Ä–µ–π—Ç–∏–Ω–≥–∞ –±—É–¥—É—Ç –æ—á–∏—â–µ–Ω—ã
2. –†–µ–π—Ç–∏–Ω–≥–∏ –±—É–¥—É—Ç –ø–µ—Ä–µ—Å—á–∏—Ç–∞–Ω—ã –∑–∞–Ω–æ–≤–æ

## ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–¢–µ—Å—Ç–æ–≤–∞—è –ë–î** (~100 –∏–≥—Ä–æ–∫–æ–≤, ~20 —Ç—É—Ä–Ω–∏—Ä–æ–≤): ~30 —Å–µ–∫—É–Ω–¥
- **–°—Ä–µ–¥–Ω—è—è –ë–î** (~500 –∏–≥—Ä–æ–∫–æ–≤, ~100 —Ç—É—Ä–Ω–∏—Ä–æ–≤): ~3-5 –º–∏–Ω—É—Ç
- **–ë–æ–ª—å—à–∞—è –ë–î** (~2000 –∏–≥—Ä–æ–∫–æ–≤, ~500 —Ç—É—Ä–Ω–∏—Ä–æ–≤): ~15-30 –º–∏–Ω—É—Ç

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞: "No module named 'apps'"

```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ –∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞
cd /path/to/SandMatch
python scripts/full_rating_recalculation.py
```

### –û—à–∏–±–∫–∞: "django.core.exceptions.ImproperlyConfigured"

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è
export DJANGO_SETTINGS_MODULE=sandmatch.settings.base
```

### –°–∫—Ä–∏–ø—Ç –∑–∞–≤–∏—Å–∞–µ—Ç –Ω–∞ —à–∞–≥–µ 5

- –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è –±–æ–ª—å—à–∏—Ö –ë–î
- –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (–º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –¥–æ 30 –º–∏–Ω—É—Ç)
- –ü—Ä–æ–≥—Ä–µ—Å—Å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª–∏

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Django
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ë–î –¥–æ—Å—Ç—É–ø–Ω–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
4. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏ –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞
