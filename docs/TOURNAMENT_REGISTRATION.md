# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ —Ç—É—Ä–Ω–∏—Ä—ã: —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ TODO-–ø–ª–∞–Ω

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞ —Ç—É—Ä–Ω–∏—Ä—ã –≤ SandMatch, –∞ —Ç–∞–∫–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç TODO-–ø–ª–∞–Ω –ø–æ –¥–æ—Ä–∞–±–æ—Ç–∫–∞–º.

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–ë–∞–∑–æ–≤—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ –∏ —Ç–µ—Ä–º–∏–Ω—ã](#1-–±–∞–∑–æ–≤—ã–µ-—Å—É—â–Ω–æ—Å—Ç–∏-–∏-—Ç–µ—Ä–º–∏–Ω—ã)
2. [RegistrationService: –µ–¥–∏–Ω—ã–π —Å–µ—Ä–≤–∏—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏](#2-registrationservice-–µ–¥–∏–Ω—ã–π-—Å–µ—Ä–≤–∏—Å-—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏)
3. [–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Å–∏–≥–Ω–∞–ª—ã](#3-—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è-—á–µ—Ä–µ–∑-—Å–∏–≥–Ω–∞–ª—ã)
4. [–†–∞–∑—Ä–µ–∑ 1: –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π vs –ø–∞—Ä–Ω—ã–π —Ç—É—Ä–Ω–∏—Ä](#4-—Ä–∞–∑—Ä–µ–∑-1-–∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π-vs-–ø–∞—Ä–Ω—ã–π-—Ç—É—Ä–Ω–∏—Ä)
5. [–†–∞–∑—Ä–µ–∑ 2: –≤–µ–±, –º–∏–Ω–∏-–∞–ø–ø, —Ç–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç](#5-—Ä–∞–∑—Ä–µ–∑-2-–≤–µ–±-–º–∏–Ω–∏-–∞–ø–ø-—Ç–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç)
6. [TODO-–ø–ª–∞–Ω –ø–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏](#6-todo-–ø–ª–∞–Ω-–ø–æ-—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏)

---

## 1. –ë–∞–∑–æ–≤—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ –∏ —Ç–µ—Ä–º–∏–Ω—ã

### 1.1. –û—Å–Ω–æ–≤–Ω–æ–π —Å–æ—Å—Ç–∞–≤, —Ä–µ–∑–µ—Ä–≤, –ø–æ–∏—Å–∫ –ø–∞—Ä—ã

–î–ª—è –ª—é–±–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞ —Ç—É—Ä–Ω–∏—Ä –≤—ã–¥–µ–ª—è—é—Ç—Å—è —Ç—Ä–∏ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ—è:

- **–û—Å–Ω–æ–≤–Ω–æ–π —Å–æ—Å—Ç–∞–≤ (main_list)**  
  –ü–∞—Ä—ã/–∏–≥—Ä–æ–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ —Ç—É—Ä–Ω–∏—Ä –≤ —Ä–∞–º–∫–∞—Ö –ª–∏–º–∏—Ç–∞ `planned_participants`.

- **–†–µ–∑–µ—Ä–≤–Ω—ã–π —Å–æ—Å—Ç–∞–≤ (reserve_list)**  
  –ü–∞—Ä—ã/–∏–≥—Ä–æ–∫–∏ —Å–≤–µ—Ä—Ö –ª–∏–º–∏—Ç–∞ `planned_participants`. –ü—Ä–∏ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–∏ –º–µ—Å—Ç –º–æ–≥—É—Ç –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–æ—Å—Ç–∞–≤.

- **–†–µ–∂–∏–º "–∏—â–µ—Ç –ø–∞—Ä—É" (looking_for_partner)**  
  –ê–∫—Ç—É–∞–ª—å–Ω–æ –¥–ª—è –ø–∞—Ä–Ω—ã—Ö —Ç—É—Ä–Ω–∏—Ä–æ–≤. –ò–≥—Ä–æ–∫ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω, –Ω–æ –±–µ–∑ –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã:
  - –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞–π–¥–µ–Ω –∏ –¥–æ–±–∞–≤–ª–µ–Ω –≤ –ø–∞—Ä—É —á–µ—Ä–µ–∑ –≤–µ–±/–º–∏–Ω–∏-–∞–ø–ø/–±–æ—Ç;
  - –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –≤ –ø–∞—Ä—É.

### 1.2. –ú–æ–¥–µ–ª—å TournamentRegistration

**–§–∞–π–ª:** `apps/tournaments/registration_models.py`

–ú–æ–¥–µ–ª—å `TournamentRegistration` —Ö—Ä–∞–Ω–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é **–æ–¥–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞** –Ω–∞ **–æ–¥–∏–Ω —Ç—É—Ä–Ω–∏—Ä**:

- `tournament: FK(Tournament, related_name="registrations")`
- `player: FK(Player, related_name="tournament_registrations")`
- `partner: FK(Player, null=True)` ‚Äî –Ω–∞–ø–∞—Ä–Ω–∏–∫ (–µ—Å–ª–∏ —É–∂–µ –µ—Å—Ç—å –ø–∞—Ä–∞)
- `team: FK(Team, null=True)` ‚Äî –∫–æ–º–∞–Ω–¥–∞ –∏–∑ `teams.Team`
- `status: CharField` —Å –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ–º:
  - `looking_for_partner` ‚Äî –∏–≥—Ä–æ–∫ –∏—â–µ—Ç –ø–∞—Ä—É
  - `invited` ‚Äî –∏–≥—Ä–æ–∫ –ø–æ–ª—É—á–∏–ª –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –≤ –ø–∞—Ä—É (–ø–æ–∫–∞ –Ω–µ –ø—Ä–∏–Ω—è–ª)
  - `main_list` ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è —Å–µ—Ç–∫–∞
  - `reserve_list` ‚Äî —Ä–µ–∑–µ—Ä–≤–Ω—ã–π —Å–ø–∏—Å–æ–∫
- `registration_order: int` ‚Äî –ø–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ–ø–∞–¥–∞–Ω–∏–µ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π/—Ä–µ–∑–µ—Ä–≤–Ω—ã–π —Å–ø–∏—Å–æ–∫
- `registered_at: DateTime` ‚Äî –¥–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- `updated_at: DateTime` ‚Äî –¥–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

**–ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã** (–ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –≤ `clean`):
- –∏–≥—Ä–æ–∫ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–≤–æ–∏–º –Ω–∞–ø–∞—Ä–Ω–∏–∫–æ–º
- –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –Ω–∞–ø–∞—Ä–Ω–∏–∫–∞ (`partner`) –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∫–æ–º–∞–Ω–¥–∞ (`team`)
- –¥–ª—è —Å—Ç–∞—Ç—É—Å–æ–≤ `main_list` / `reserve_list` –∫–æ–º–∞–Ω–¥–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞

**Constraint:** —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å `tournament + player` (–æ–¥–∏–Ω –∏–≥—Ä–æ–∫ = –æ–¥–Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ —Ç—É—Ä–Ω–∏—Ä)

### 1.3. –ú–æ–¥–µ–ª—å TournamentEntry –∏ —Å–≤—è–∑–∫–∞ —Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π

**–§–∞–π–ª:** `apps/tournaments/models.py`

`TournamentEntry` –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∫–æ–º–∞–Ω–¥—É (team) –∫–∞–∫ —É—á–∞—Å—Ç–Ω–∏–∫–∞ —Ç—É—Ä–Ω–∏—Ä–∞.

**–°–≤—è–∑–∫–∞ —Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π:**
- –î–ª—è —Å—Ç–∞—Ç—É—Å–æ–≤ `MAIN_LIST` –∏ `RESERVE_LIST` —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π –¥–æ–ª–∂–Ω–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∞—è –∑–∞–ø–∏—Å—å –≤ `TournamentEntry`
- –î–ª—è —Å—Ç–∞—Ç—É—Å–æ–≤ `LOOKING_FOR_PARTNER` –∏ `INVITED` —É—á–∞—Å—Ç–Ω–∏–∫ **–Ω–µ –¥–æ–ª–∂–µ–Ω** –±—ã—Ç—å –≤ `TournamentEntry`
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—è—è —á–µ—Ä–µ–∑ —Å–∏–≥–Ω–∞–ª—ã (—Å–º. —Ä–∞–∑–¥–µ–ª 3)

## 2. RegistrationService: –µ–¥–∏–Ω—ã–π —Å–µ—Ä–≤–∏—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

**–§–∞–π–ª:** `apps/tournaments/services/registration_service.py`

`RegistrationService` –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É–µ—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.

### 2.1. –†–∞–±–æ—Ç–∞ —Å –∫–æ–º–∞–Ω–¥–∞–º–∏

- `_get_or_create_team(player1, player2)` ‚Äî –Ω–∞—Ö–æ–¥–∏—Ç –∏–ª–∏ —Å–æ–∑–¥–∞—ë—Ç –∫–æ–º–∞–Ω–¥—É –∏–∑ –¥–≤—É—Ö –∏–≥—Ä–æ–∫–æ–≤ (—É—á–∏—Ç—ã–≤–∞–µ—Ç –æ–±–µ –ø–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫–∏ A+B –∏ B+A)

### 2.2. –ü–µ—Ä–µ—Å—á—ë—Ç –æ—Å–Ω–æ–≤–Ω–æ–π/—Ä–µ–∑–µ—Ä–≤–Ω–æ–π –æ—á–µ—Ä–µ–¥–∏

- `_recalculate_registration_statuses(tournament)`:
  - –±–µ—Ä—ë—Ç –≤—Å–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Ç—É—Ä–Ω–∏—Ä–∞ —Å–æ —Å—Ç–∞—Ç—É—Å–∞–º–∏ `MAIN_LIST` –∏ `RESERVE_LIST`
  - —Å–æ—Ä—Ç–∏—Ä—É–µ—Ç –ø–æ `registration_order` –∏ `registered_at`
  - –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç `tournament.planned_participants` –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å `MAIN_LIST` –∏–ª–∏ `RESERVE_LIST`
  - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç `TournamentEntry` (—á–µ—Ä–µ–∑ `_sync_to_tournament_entry`)
  - –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ–ª–µ–≥—Ä–∞–º-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞

### 2.3. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å TournamentEntry

- `_sync_to_tournament_entry(registration)`:
  - –¥–ª—è `MAIN_LIST`/`RESERVE_LIST` —Å–æ–∑–¥–∞—ë—Ç/–æ–±–Ω–æ–≤–ª—è–µ—Ç `TournamentEntry` (–µ—Å–ª–∏ –µ—Å—Ç—å –∫–æ–º–∞–Ω–¥–∞)
  - –¥–ª—è –ø—Ä–æ—á–∏—Ö —Å—Ç–∞—Ç—É—Å–æ–≤ —É–¥–∞–ª—è–µ—Ç `TournamentEntry`

### 2.4. –û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

**–û–¥–∏–Ω–æ—á–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:**

- `register_single(tournament, player)`:
  - —Å–æ–∑–¥–∞—ë—Ç/–∏—â–µ—Ç –∫–æ–º–∞–Ω–¥—É –∏–∑ –æ–¥–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞
  - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç `MAIN_LIST` –∏–ª–∏ `RESERVE_LIST` –ø–æ —Ç–µ–∫—É—â–µ–º—É —á–∏—Å–ª—É `MAIN_LIST` –∏ `planned_participants`
  - —Å–æ–∑–¥–∞—ë—Ç `TournamentRegistration` –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –≤ `TournamentEntry`

**–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –¥–ª—è –ø–∞—Ä–Ω—ã—Ö —Ç—É—Ä–Ω–∏—Ä–æ–≤:**

- `register_looking_for_partner(tournament, player)`:
  - —Å–æ–∑–¥–∞—ë—Ç `TournamentRegistration` —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `LOOKING_FOR_PARTNER`
  - –Ω–µ —Å–æ–∑–¥–∞—ë—Ç `TournamentEntry`

- `register_with_partner(tournament, player, partner, notify_partner=True)`:
  - –ø—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –Ω–∏ –∏–≥—Ä–æ–∫, –Ω–∏ –ø–∞—Ä—Ç–Ω—ë—Ä –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ —Ç—É—Ä–Ω–∏—Ä
  - —á–µ—Ä–µ–∑ `_get_or_create_team` –ø–æ–ª—É—á–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É
  - —Å–æ–∑–¥–∞—ë—Ç –¥–≤–µ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (–¥–ª—è –æ–±–æ–∏—Ö –∏–≥—Ä–æ–∫–æ–≤) —Å –æ–±—â–∏–º `registration_order`
  - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç `MAIN_LIST`/`RESERVE_LIST` –ø–æ –ª–∏–º–∏—Ç—É
  - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –≤ `TournamentEntry`
  - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —Ä–∞—Å—Å—ã–ª–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

**–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–π:**

- `send_pair_invitation(tournament, sender, receiver, message)`:
  - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ `sender` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å—Ç–∞—Ç—É—Å–µ "–∏—â–µ—Ç –ø–∞—Ä—É"
  - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ `receiver` –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —É–∂–µ –≤ –ø–∞—Ä–µ –Ω–∞ —ç—Ç–æ—Ç —Ç—É—Ä–Ω–∏—Ä
  - —Å–æ–∑–¥–∞—ë—Ç `PairInvitation` –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ–ª–µ–≥—Ä–∞–º-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

- `leave_pair(registration)` ‚Äî —Ä–∞–∑—Ä—ã–≤ —Ç–µ–∫—É—â–µ–π –ø–∞—Ä—ã (–æ–±–∞ –∏–≥—Ä–æ–∫–∞ –≤ "–∏—â—É –ø–∞—Ä—É")
- `cancel_registration(registration)` ‚Äî –ø–æ–ª–Ω–∞—è –æ—Ç–º–µ–Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞ —Ç—É—Ä–Ω–∏—Ä

## 3. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Å–∏–≥–Ω–∞–ª—ã

**–§–∞–π–ª:** `apps/tournaments/signals.py`

–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É `TournamentRegistration` –∏ `TournamentEntry` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ Django —Å–∏–≥–Ω–∞–ª—ã –∏ —è–≤–ª—è–µ—Ç—Å—è **–¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–µ–π**.

### 3.1. TournamentEntry ‚Üí TournamentRegistration

- `post_save(TournamentEntry) ‚Üí sync_tournament_entry_created`:
  - –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ `TournamentEntry` –≤—ã–∑—ã–≤–∞–µ—Ç `RegistrationService.sync_tournament_entry_to_registration(instance)`
  - —Å–æ–∑–¥–∞—ë—Ç/–∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –¥–ª—è –∫–æ–º–∞–Ω–¥, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ—è–≤–∏–ª–∏—Å—å —á–µ—Ä–µ–∑ –¥—Ä—É–≥–∏–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã

- `post_delete(TournamentEntry) ‚Üí sync_tournament_entry_deleted`:
  - –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ `TournamentEntry` —É–¥–∞–ª—è–µ—Ç —Å–≤—è–∑–∞–Ω–Ω—ã–µ `TournamentRegistration` –¥–ª—è —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥—ã

### 3.2. –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Ç—É—Ä–Ω–∏—Ä–∞

- `pre_save(Tournament) ‚Üí track_planned_participants_change`:
  - –∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç —Å—Ç–∞—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `planned_participants`

- `post_save(Tournament) ‚Üí recalculate_on_planned_participants_change`:
  - –µ—Å–ª–∏ –ª–∏–º–∏—Ç –∏–∑–º–µ–Ω–∏–ª—Å—è, –∑–∞–ø—É—Å–∫–∞–µ—Ç `_recalculate_registration_statuses`

### 3.3. TournamentRegistration ‚Üí TournamentEntry

- `pre_save(TournamentRegistration) ‚Üí track_registration_status_change`:
  - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Å—Ç–∞—Ä—ã–π —Å—Ç–∞—Ç—É—Å –∏ –∫–æ–º–∞–Ω–¥—É

- `post_save(TournamentRegistration) ‚Üí sync_registration_to_entry`:
  - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç `TournamentRegistration` –≤ `TournamentEntry` —á–µ—Ä–µ–∑ `_sync_to_tournament_entry`
  - –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç –ø–µ—Ä–µ—Å—á—ë—Ç –æ—á–µ—Ä–µ–¥–∏ (`_recalculate_registration_statuses`) —á–µ—Ä–µ–∑ `transaction.on_commit`
  - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ñ–ª–∞–≥ `_skip_recalculation` –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è —Ä–µ–∫—É—Ä—Å–∏–∏

- `post_delete(TournamentRegistration) ‚Üí recalculate_on_registration_deleted`:
  - —É–¥–∞–ª—è–µ—Ç `TournamentEntry` –¥–ª—è –∫–æ–º–∞–Ω–¥—ã
  - –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç –æ—á–µ—Ä–µ–¥—å —á–µ—Ä–µ–∑ `transaction.on_commit`

**–í–∞–∂–Ω–æ:** –≤—Å–µ –ø–µ—Ä–µ—Å—á—ë—Ç—ã –æ—á–µ—Ä–µ–¥–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ `transaction.on_commit` –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –∏–∑–±–µ–∂–∞–Ω–∏—è –ø—Ä–æ–±–ª–µ–º —Å –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏.

## 4. –†–∞–∑—Ä–µ–∑ 1: –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π vs –ø–∞—Ä–Ω—ã–π —Ç—É—Ä–Ω–∏—Ä

### 4.1. –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Ç—É—Ä–Ω–∏—Ä—ã (SINGLES)

- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏–¥—ë—Ç —á–µ—Ä–µ–∑ `register_single(tournament, player)`
- –°–æ–∑–¥–∞—ë—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞ –∏–∑ –æ–¥–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞ (`team.player_2 = null`)
- –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:
  - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏–≥—Ä–æ–∫–∞ (–≤–µ–±/–º–∏–Ω–∏-–∞–ø–ø/–±–æ—Ç)
  - –ø–æ–ø–∞–¥–∞–Ω–∏–µ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –∏–ª–∏ —Ä–µ–∑–µ—Ä–≤–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø–æ –ª–∏–º–∏—Ç—É `planned_participants`
  - –æ—Ç–º–µ–Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- –ü–∞—Ä–∞/–ø–æ–∏—Å–∫ –ø–∞—Ä—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

### 4.2. –ü–∞—Ä–Ω—ã–µ —Ç—É—Ä–Ω–∏—Ä—ã (DOUBLES)

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è:

**1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≥–æ—Ç–æ–≤–æ–π –ø–∞—Ä–æ–π:**
- –∏–≥—Ä–æ–∫-–∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞–ø–∞—Ä–Ω–∏–∫–∞
- —Å–æ–∑–¥–∞—ë—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞ –∏–∑ –¥–≤—É—Ö –∏–≥—Ä–æ–∫–æ–≤ –∏ –¥–≤–µ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- –ø–∞—Ä–∞ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –∏–ª–∏ —Ä–µ–∑–µ—Ä–≤–Ω—ã–π —Å–ø–∏—Å–æ–∫

**2. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –ø–æ–∏—Å–∫ –ø–∞—Ä—ã:**
- –∏–≥—Ä–æ–∫ —Å—Ç–∞–≤–∏—Ç —Å–µ–±—è –≤ —Å—Ç–∞—Ç—É—Å `LOOKING_FOR_PARTNER`
- –¥—Ä—É–≥–æ–π –∏–≥—Ä–æ–∫ –º–æ–∂–µ—Ç:
  - –Ω–∞–π—Ç–∏ –µ–≥–æ —á–µ—Ä–µ–∑ –ø–æ–∏—Å–∫ (–≤–µ–±/–º–∏–Ω–∏-–∞–ø–ø)
  - –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ
- –ø—Ä–∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–∏ –ø–∞—Ä—ã —Å—Ç–∞—Ç—É—Å—ã –∏ `TournamentEntry` —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## 5. –†–∞–∑—Ä–µ–∑ 2: –≤–µ–±, –º–∏–Ω–∏-–∞–ø–ø, —Ç–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç

### 5.1. –í–µ–±-—Å–∞–π—Ç

**Backend:** `apps/tournaments/api_views.py` (TournamentViewSet)

- –ü—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞ —á–µ—Ä–µ–∑ `_ensure_can_register`, `_get_current_player`.
- `registration_state` / `registration_state_public` –æ—Ç–¥–∞—é—Ç —Ç—Ä–∏ —Å–ø–∏—Å–∫–∞: `main_list`, `reserve_list`, `looking_for_partner`.
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Å—á–∏—Ç–∞–µ—Ç—Å—è –ø–æ `TournamentEntry` (–∫–æ–º–∞–Ω–¥—ã), –∞ –Ω–µ –ø–æ —á–∏—Å–ª—É `TournamentRegistration`.
- –í—Å–µ —Ä–µ—à–µ–Ω–∏—è –æ –ø–æ–ø–∞–¥–∞–Ω–∏–∏ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π/—Ä–µ–∑–µ—Ä–≤–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É **–∫–æ–º–∞–Ω–¥**, –∞ –Ω–µ —Å—Ç—Ä–æ–∫ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.
- `cancel_registration` –¥–ª—è –ø–∞—Ä:
  - —É–¥–∞–ª—è–µ—Ç `TournamentEntry`;
  - —É–¥–∞–ª—è–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä–∞;
  - —è–≤–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –Ω–∞–ø–∞—Ä–Ω–∏–∫–∞ –≤ —Å—Ç–∞—Ç—É—Å–µ `LOOKING_FOR_PARTNER` —á–µ—Ä–µ–∑ `register_looking_for_partner`.
- –ü–æ–∏—Å–∫ –Ω–∞–ø–∞—Ä–Ω–∏–∫–∞:
  - `search_players` –∏ `recent_partners` –ø–æ–º–µ—á–∞—é—Ç `is_registered = true`, –µ—Å–ª–∏ –∏–≥—Ä–æ–∫ —É–∂–µ —Å–æ—Å—Ç–æ–∏—Ç –≤ –ø–∞—Ä–µ (–∫–∞–∫ –≤ –ø–æ–ª–µ `player`, —Ç–∞–∫ –∏ –≤ `partner`) –≤ `MAIN_LIST/RESERVE_LIST`;
  - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –æ—Ç–¥–∞—é—Ç —Ä–µ–π—Ç–∏–Ω–≥ `rating_bp` (—Ç–µ–∫—É—â–∏–π BP –∏–≥—Ä–æ–∫–∞).

**Frontend:**

- –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/registration` (`TournamentRegistrationPage.tsx`):
  - –±–ª–æ–∫–∏ ¬´–û—Å–Ω–æ–≤–Ω–æ–π —Å–æ—Å—Ç–∞–≤¬ª, ¬´–†–µ–∑–µ—Ä–≤–Ω—ã–π —Å–ø–∏—Å–æ–∫¬ª, ¬´–ü–æ–∏—Å–∫ –ø–∞—Ä—ã¬ª;
  - –≤ ¬´–û—Å–Ω–æ–≤–Ω–æ–º —Å–æ—Å—Ç–∞–≤–µ¬ª —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –∞–ª—Ñ–∞–≤–∏—Ç—É –ø–æ –§–ò–û –ø–∞—Ä—ã;
  - –≤ ¬´–†–µ–∑–µ—Ä–≤–Ω–æ–º —Å–ø–∏—Å–∫–µ¬ª –ø–æ—Ä—è–¥–æ–∫ –ø–æ `registration_order`/–¥–∞—Ç–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏;
  - –≤–µ–∑–¥–µ —Ä—è–¥–æ–º —Å –§–ò–û/–ø–∞—Ä–æ–π –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è BP‚Äë—Ä–µ–π—Ç–∏–Ω–≥ (–¥–ª—è –ø–∞—Ä—ã ‚Äî —Å—Ä–µ–¥–Ω–∏–π);
  - –ø–æ–¥–ø–∏—Å–∏ ¬´–û—Å–Ω–æ–≤–Ω–æ–π —Å–æ—Å—Ç–∞–≤¬ª/¬´–†–µ–∑–µ—Ä–≤–Ω—ã–π —Å–ø–∏—Å–æ–∫¬ª –ø–æ–¥ —Å—Ç—Ä–æ–∫–∞–º–∏ —É–±—Ä–∞–Ω—ã (–æ—Å—Ç–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –±–ª–æ–∫–æ–≤).
- –ú–æ–¥–∞–ª–∫–∞ –≤—ã–±–æ—Ä–∞ –Ω–∞–ø–∞—Ä–Ω–∏–∫–∞ (`PartnerSearchModalWeb.tsx`):
  - –±–ª–æ–∫ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π ¬´–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –≤–∞—à–µ–π –∏—Å—Ç–æ—Ä–∏–∏¬ª + –ø–æ–∏—Å–∫;
  - –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–≥—Ä–æ–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –§–ò–û –∏ BP‚Äë—Ä–µ–π—Ç–∏–Ω–≥;
  - –∏–≥—Ä–æ–∫–∏, —É–∂–µ —Å–æ—Å—Ç–æ—è—â–∏–µ –≤ –ø–∞—Ä–∞—Ö (—á–µ—Ä–µ–∑ —Å–∞–π—Ç –∏–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–æ–º), –ø–æ–º–µ—á–∞—é—Ç—Å—è `is_registered = true` –∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –≤—ã–±–æ—Ä–∞.

### 5.2. Telegram Mini App

**–§–∞–π–ª:** `apps/telegram_bot/api_views.py`

#### –û–±—â–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

- `GET /api/mini-app/tournaments/` ‚Äî —Å–ø–∏—Å–æ–∫ —Ç—É—Ä–Ω–∏—Ä–æ–≤ —Å –∏–Ω–¥–∏–∫–∞—Ü–∏–µ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- `GET /api/mini-app/tournaments/{id}/` ‚Äî –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä —Ç—É—Ä–Ω–∏—Ä–∞
- `GET /api/mini-app/tournaments/my_tournaments/` ‚Äî –º–æ–∏ —Ç—É—Ä–Ω–∏—Ä—ã

#### –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (–ø–æ–ª–Ω–æ—Å—Ç—å—é —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã —á–µ—Ä–µ–∑ RegistrationService)

**–ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ—Å—Ç–æ—è–Ω–∏—è:**
- `GET /api/mini-app/tournaments/{id}/my-registration/` ‚Äî –º–æ—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ —Ç—É—Ä–Ω–∏—Ä
  - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å, –Ω–∞–ø–∞—Ä–Ω–∏–∫–∞, –∫–æ–º–∞–Ω–¥—É
- `GET /api/mini-app/tournaments/{id}/participants/` ‚Äî —Å–ø–∏—Å–∫–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
  - –æ—Å–Ω–æ–≤–Ω–æ–π —Å–æ—Å—Ç–∞–≤ (—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –∞–ª—Ñ–∞–≤–∏—Ç—É)
  - —Ä–µ–∑–µ—Ä–≤–Ω—ã–π —Å–ø–∏—Å–æ–∫ (—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –æ—á–µ—Ä–µ–¥–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏)
  - –∏—â—É—Ç –ø–∞—Ä—É (—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –∞–ª—Ñ–∞–≤–∏—Ç—É)

**–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:**
- `POST /api/mini-app/tournaments/{id}/register-single/` ‚Äî –æ–¥–∏–Ω–æ—á–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (–¥–ª—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö —Ç—É—Ä–Ω–∏—Ä–æ–≤)
- `POST /api/mini-app/tournaments/{id}/register-looking-for-partner/` ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ —Ä–µ–∂–∏–º–µ "–∏—â—É –ø–∞—Ä—É"
- `POST /api/mini-app/tournaments/{id}/register-with-partner/` ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å –Ω–∞–ø–∞—Ä–Ω–∏–∫–æ–º
  - body: `{"partner_id": <player_id>}`
  - —Å–æ–∑–¥–∞—ë—Ç –¥–≤–µ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –¥–ª—è –æ–±–æ–∏—Ö –∏–≥—Ä–æ–∫–æ–≤
  - –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –Ω–∞–ø–∞—Ä–Ω–∏–∫—É, –µ—Å–ª–∏ —É –Ω–µ–≥–æ –µ—Å—Ç—å Telegram

**–ü–æ–∏—Å–∫ –Ω–∞–ø–∞—Ä–Ω–∏–∫–∞:**
- `GET /api/mini-app/tournaments/{id}/search-players/?q=<query>` ‚Äî –ø–æ–∏—Å–∫ –∏–≥—Ä–æ–∫–æ–≤ –ø–æ –§–ò–û
  - –∏—Å–∫–ª—é—á–∞–µ—Ç —Ç–µ–∫—É—â–µ–≥–æ –∏–≥—Ä–æ–∫–∞ –∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
  - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥ BP –∫–∞–∂–¥–æ–≥–æ –∏–≥—Ä–æ–∫–∞
  - –ø–æ–º–µ—á–∞–µ—Ç `is_registered=true` –¥–ª—è –∏–≥—Ä–æ–∫–æ–≤ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º/—Ä–µ–∑–µ—Ä–≤–Ω–æ–º —Å–ø–∏—Å–∫–µ
  - –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –∑–∞–ø—Ä–æ—Å–∞: 2 —Å–∏–º–≤–æ–ª–∞
- `GET /api/mini-app/tournaments/{id}/recent-partners/` ‚Äî —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞–ø–∞—Ä–Ω–∏–∫–æ–≤
  - 3 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –Ω–∞–ø–∞—Ä–Ω–∏–∫–∞
  - –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–æ 5 –∏–∑ –Ω–∞–∏–±–æ–ª–µ–µ —á–∞—Å—Ç—ã—Ö –Ω–∞–ø–∞—Ä–Ω–∏–∫–æ–≤
  - —Å —Ä–µ–π—Ç–∏–Ω–≥–∞–º–∏ BP –∏ —Å—Ç–∞—Ç—É—Å–æ–º —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

**–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è:**
- `GET /api/mini-app/invitations/` ‚Äî —Å–ø–∏—Å–æ–∫ –≤—Ö–æ–¥—è—â–∏—Ö –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π
- `POST /api/mini-app/tournaments/{id}/send-pair-invitation/` ‚Äî –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ
  - body: `{"receiver_id": <player_id>, "message": "—Ç–µ–∫—Å—Ç"}`
  - –¥–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è –∏–≥—Ä–æ–∫–æ–≤ –≤ —Å—Ç–∞—Ç—É—Å–µ `looking_for_partner`
- `POST /api/mini-app/invitations/{id}/accept/` ‚Äî –ø—Ä–∏–Ω—è—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ
  - —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –ø–∞—Ä—É —á–µ—Ä–µ–∑ `RegistrationService.register_with_partner`
- `POST /api/mini-app/invitations/{id}/decline/` ‚Äî –æ—Ç–∫–ª–æ–Ω–∏—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π:**
- `POST /api/mini-app/tournaments/{id}/leave-pair/` ‚Äî –≤—ã—Ö–æ–¥ –∏–∑ –ø–∞—Ä—ã
  - –æ–±–∞ –∏–≥—Ä–æ–∫–∞ –ø–µ—Ä–µ–≤–æ–¥—è—Ç—Å—è –≤ —Å—Ç–∞—Ç—É—Å `looking_for_partner`
  - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `transaction.atomic()` –∏ `select_for_update()` –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è race conditions
  - —Å–Ω–∞—á–∞–ª–∞ –æ–±–Ω—É–ª—è—é—Ç—Å—è `team` –∏ `partner`, –∑–∞—Ç–µ–º —É–¥–∞–ª—è–µ—Ç—Å—è `TournamentEntry`
- `POST /api/mini-app/tournaments/{id}/cancel-registration/` ‚Äî –ø–æ–ª–Ω–∞—è –æ—Ç–º–µ–Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
  - —É–¥–∞–ª—è–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é —Ç–µ–∫—É—â–µ–≥–æ –∏–≥—Ä–æ–∫–∞
  - –µ—Å–ª–∏ –µ—Å—Ç—å –Ω–∞–ø–∞—Ä–Ω–∏–∫, –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –µ–≥–æ –≤ `looking_for_partner`

**–°—Ç–∞—Ç—É—Å:** backend –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω —á–µ—Ä–µ–∑ `RegistrationService`. –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏–¥—É—Ç —á–µ—Ä–µ–∑ `TournamentRegistration`.

### 5.3. Telegram-–±–æ—Ç

**–§–∞–π–ª—ã:** 
- `apps/telegram_bot/bot/handlers/tournaments.py` - –±–∞–∑–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –∫–æ–º–∞–Ω–¥—ã
- `apps/telegram_bot/bot/handlers/registration.py` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

#### –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–ì–û–¢–û–í–û ‚úÖ)

- ‚úÖ –ü—Ä–æ—Ñ–∏–ª—å –∏ –ø—Ä–∏–≤—è–∑–∫–∞ `TelegramUser ‚Üî Player`
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ `apps/telegram_bot/tasks.py`
- ‚úÖ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `TournamentRegistration` –≤–º–µ—Å—Ç–æ `TournamentEntry`

#### –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

**–ü—Ä–æ—Å–º–æ—Ç—Ä —Ç—É—Ä–Ω–∏—Ä–æ–≤:**
- `/tournaments` - —Å–ø–∏—Å–æ–∫ —Ç—É—Ä–Ω–∏—Ä–æ–≤ Live –∏ –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
  - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–Ω–æ–ø–∫—É "‚úÖ –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è" –¥–ª—è –Ω–µ–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - –î–ª—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö —Ç—É—Ä–Ω–∏—Ä–æ–≤ - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ –æ–¥–∏–Ω –∫–ª–∏–∫
  - –î–ª—è –ø–∞—Ä–Ω—ã—Ö —Ç—É—Ä–Ω–∏—Ä–æ–≤ - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- `/mytournaments` - —Ç—É—Ä–Ω–∏—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—á–µ—Ä–µ–∑ `TournamentRegistration`)
- `/myregistration` - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è—Ö
  - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å (–æ—Å–Ω–æ–≤–Ω–æ–π —Å–æ—Å—Ç–∞–≤ / —Ä–µ–∑–µ—Ä–≤ / –∏—â—É –ø–∞—Ä—É)
  - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –Ω–∞–ø–∞—Ä–Ω–∏–∫–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å)
  - –ö–Ω–æ–ø–∫–∞ –æ—Ç–º–µ–Ω—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

#### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ —Ç—É—Ä–Ω–∏—Ä—ã (–ì–û–¢–û–í–û ‚úÖ)

**–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Ç—É—Ä–Ω–∏—Ä—ã:**
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ –æ–¥–∏–Ω –∫–ª–∏–∫ —á–µ—Ä–µ–∑ `RegistrationService.register_single()`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ (main_list / reserve_list)

**–ü–∞—Ä–Ω—ã–µ —Ç—É—Ä–Ω–∏—Ä—ã - –≤—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞:**
1. **"üîç –ò—â—É –ø–∞—Ä—É"** - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ `RegistrationService.register_looking_for_partner()`
2. **"üë• –° –Ω–∞–ø–∞—Ä–Ω–∏–∫–æ–º"** - –∑–∞–ø—É—Å–∫–∞–µ—Ç FSM –¥–ª—è –ø–æ–∏—Å–∫–∞ –Ω–∞–ø–∞—Ä–Ω–∏–∫–∞:
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –§–ò–û –Ω–∞–ø–∞—Ä–Ω–∏–∫–∞ (–º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞)
   - –ë–æ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–æ 10 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –Ω–∞–ø–∞—Ä–Ω–∏–∫–∞ –∏–∑ —Å–ø–∏—Å–∫–∞
   - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ `RegistrationService.register_with_partner()`
   - –ù–∞–ø–∞—Ä–Ω–∏–∫—É –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

#### –ü–æ–∏—Å–∫ –Ω–∞–ø–∞—Ä–Ω–∏–∫–∞ —á–µ—Ä–µ–∑ FSM (–ì–û–¢–û–í–û ‚úÖ)

**–°–æ—Å—Ç–æ—è–Ω–∏—è:**
- `PartnerSearchStates.waiting_for_partner_name` - –æ–∂–∏–¥–∞–Ω–∏–µ –≤–≤–æ–¥–∞ –§–ò–û

**–§—É–Ω–∫—Ü–∏–∏:**
- `search_players_by_name(query, exclude_player_id)` - –ø–æ–∏—Å–∫ –ø–æ –§–ò–û
  - –ò—Å–∫–ª—é—á–∞–µ—Ç —Ç–µ–∫—É—â–µ–≥–æ –∏–≥—Ä–æ–∫–∞
  - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Ñ–∞–º–∏–ª–∏–∏, –∏–º–µ–Ω–∏
  - –õ–∏–º–∏—Ç 10 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –ö–Ω–æ–ø–∫–∏: "üîç –ù–æ–≤—ã–π –ø–æ–∏—Å–∫", "‚ùå –û—Ç–º–µ–Ω–∞"

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π (–ì–û–¢–û–í–û ‚úÖ)

**–û—Ç–º–µ–Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:**
- Callback `cancel_reg_{tournament_id}` - –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –≤—ã–±–æ—Ä –¥–µ–π—Å—Ç–≤–∏—è
- –ï—Å–ª–∏ –µ—Å—Ç—å –Ω–∞–ø–∞—Ä–Ω–∏–∫:
  - "üîÑ –í—ã–π—Ç–∏ –∏–∑ –ø–∞—Ä—ã" - —á–µ—Ä–µ–∑ `RegistrationService.leave_pair()`
    - –û–±–∞ –∏–≥—Ä–æ–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥—è—Ç –≤ `looking_for_partner`
  - "‚ùå –ü–æ–∫–∏–Ω—É—Ç—å —Ç—É—Ä–Ω–∏—Ä –ø–æ–ª–Ω–æ—Å—Ç—å—é" - —á–µ—Ä–µ–∑ `RegistrationService.cancel_registration()`
    - –¢–µ–∫—É—â–∏–π –∏–≥—Ä–æ–∫ —É–¥–∞–ª—è–µ—Ç—Å—è, –Ω–∞–ø–∞—Ä–Ω–∏–∫ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ `looking_for_partner`
- –ï—Å–ª–∏ –Ω–µ—Ç –Ω–∞–ø–∞—Ä–Ω–∏–∫–∞:
  - "‚ùå –ü–æ–∫–∏–Ω—É—Ç—å —Ç—É—Ä–Ω–∏—Ä" - –ø–æ–ª–Ω–∞—è –æ—Ç–º–µ–Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

#### –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–ì–û–¢–û–í–û ‚úÖ)

–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ–±—ë—Ä–Ω—É—Ç—ã –≤ `@sync_to_async` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Django ORM:
- `check_registration(tournament_id, player_id)` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ `TournamentRegistration`
- `get_user_tournaments(player_id)` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç—É—Ä–Ω–∏—Ä–æ–≤ —á–µ—Ä–µ–∑ `TournamentRegistration`
- `get_registration_status(tournament_id, player_id)` - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- `get_tournament(tournament_id)` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç—É—Ä–Ω–∏—Ä–∞ –ø–æ ID
- `register_single_tournament()` - –æ–±—ë—Ä—Ç–∫–∞ –¥–ª—è `RegistrationService.register_single()`
- `register_looking_for_partner_tournament()` - –æ–±—ë—Ä—Ç–∫–∞ –¥–ª—è `RegistrationService.register_looking_for_partner()`
- `register_with_partner_tournament()` - –æ–±—ë—Ä—Ç–∫–∞ –¥–ª—è `RegistrationService.register_with_partner()`
- `leave_pair_tournament()` - –æ–±—ë—Ä—Ç–∫–∞ –¥–ª—è `RegistrationService.leave_pair()`
- `cancel_registration_tournament()` - –æ–±—ë—Ä—Ç–∫–∞ –¥–ª—è `RegistrationService.cancel_registration()`

**–°—Ç–∞—Ç—É—Å:** –ü–æ–ª–Ω—ã–π —Ñ–ª–æ—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –±–æ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å `RegistrationService`. ‚úÖ

## 6. TODO-–ø–ª–∞–Ω –ø–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

### 6.1. –ë–∞–∑–∞ (–º–æ–¥–µ–ª–∏, —Å–µ—Ä–≤–∏—Å, —Å–∏–≥–Ω–∞–ª—ã)

- [x] –ú–æ–¥–µ–ª—å `TournamentRegistration` —Å –ø–æ–ª—è–º–∏ –∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏
- [x] –ú–æ–¥–µ–ª—å `PairInvitation` –¥–ª—è –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π –≤ –ø–∞—Ä—É
- [x] `RegistrationService` —Å –º–µ—Ç–æ–¥–∞–º–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –ø–µ—Ä–µ—Å—á—ë—Ç–∞ –æ—á–µ—Ä–µ–¥–∏
- [x] –î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—è—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Å–∏–≥–Ω–∞–ª—ã (`apps/tournaments/signals.py`)
- [x] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Å—á—ë—Ç –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ `planned_participants`
- [x] –ó–∞—â–∏—Ç–∞ –æ—Ç —Ä–µ–∫—É—Ä—Å–∏–∏ —á–µ—Ä–µ–∑ —Ñ–ª–∞–≥ `_skip_recalculation`

### 6.2. –í–µ–±-—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –í–´–°–û–ö–ò–ô)

#### Backend (—Å—Ç–∞—Ç—É—Å: –ì–û–¢–û–í–û)

- [x] –ü—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞ (`_ensure_can_register`)
- [x] –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (`registration_state`, `registration_state_public`)
- [x] `POST /register_single/` –¥–ª—è –æ–¥–∏–Ω–æ—á–Ω—ã—Ö —Ç—É—Ä–Ω–∏—Ä–æ–≤
- [x] `POST /register_with_partner/` –¥–ª—è –ø–∞—Ä–Ω—ã—Ö —Ç—É—Ä–Ω–∏—Ä–æ–≤ (—É—á—ë—Ç –∏–≥—Ä–æ–∫–æ–≤ –∏–∑ `LOOKING_FOR_PARTNER`)
- [x] `POST /register_looking_for_partner/` –¥–ª—è —Ä–µ–∂–∏–º–∞ "–∏—â—É –ø–∞—Ä—É"
- [x] `POST /send_invitation/` –¥–ª—è –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π
- [x] `POST /leave_pair/` –¥–ª—è —Ä–∞–∑—Ä—ã–≤–∞ –ø–∞—Ä—ã
- [x] `POST /cancel_registration/` –¥–ª—è –æ—Ç–º–µ–Ω—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å –ø–µ—Ä–µ–≤–æ–¥–æ–º –Ω–∞–ø–∞—Ä–Ω–∏–∫–∞ –≤ `LOOKING_FOR_PARTNER`
- [x] `GET /search_players/` –¥–ª—è –ø–æ–∏—Å–∫–∞ –Ω–∞–ø–∞—Ä–Ω–∏–∫–∞ (—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏–≥—Ä–æ–∫–æ–≤, —É–∂–µ —Å–æ—Å—Ç–æ—è—â–∏—Ö –≤ –ø–∞—Ä–∞—Ö + —Ä–µ–π—Ç–∏–Ω–≥ BP)
- [x] `GET /recent_partners/` –¥–ª—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –Ω–∞–ø–∞—Ä–Ω–∏–∫–æ–≤

#### Frontend (—Å—Ç–∞—Ç—É—Å: –ì–û–¢–û–í–û)

**–î–ª—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤:**
- [x] –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/registration` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π/—Ä–µ–∑–µ—Ä–≤–Ω—ã–π —Å–æ—Å—Ç–∞–≤ –∏ —Å–ø–∏—Å–æ–∫ "–ü–æ–∏—Å–∫ –ø–∞—Ä—ã" —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º –ø–æ–¥—Å—á—ë—Ç–æ–º –∫–æ–º–∞–Ω–¥ –∏ —Ä–µ–π—Ç–∏–Ω–≥–∞–º–∏.
- [x] –ö–Ω–æ–ø–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏/–æ—Ç–º–µ–Ω—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏/–ø–æ–∏—Å–∫–∞ –ø–∞—Ä—ã –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º.
- [x] –ú–æ–¥–∞–ª–∫–∞ –ø–æ–∏—Å–∫–∞ –Ω–∞–ø–∞—Ä–Ω–∏–∫–∞ —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏ –∏ —Ä–µ–π—Ç–∏–Ω–≥–∞–º–∏ BP.
- [x] –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (–æ—Å–Ω–æ–≤–Ω–æ–π/—Ä–µ–∑–µ—Ä–≤/–∏—â—É –ø–∞—Ä—É) –∏ –ø–∞—Ä—Ç–Ω—ë—Ä–∞.
- [x] –ò–Ω–¥–∏–∫–∞—Ü–∏—è —Å–≤–æ–±–æ–¥–Ω—ã—Ö –º–µ—Å—Ç –∏ –ª–∏–º–∏—Ç–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤.
- [x] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º.

**–î–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–æ–≤ (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏):**
- [x] **–í–∏–∑—É–∞–ª—å–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–≤** –≤ `DraggableParticipantList`:
  - "–û—Å–Ω–æ–≤–Ω–æ–π —Å–æ—Å—Ç–∞–≤" (—Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤)
  - "–†–µ–∑–µ—Ä–≤–Ω—ã–π —Å–ø–∏—Å–æ–∫" (—Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤)
- [x] **–ù–µ–∑–∞–≤–∏—Å–∏–º–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Å–ø–∏—Å–∫–æ–≤:**
  - –û—Å–Ω–æ–≤–Ω–æ–π —Å–æ—Å—Ç–∞–≤: –ø–æ –§–ò–û –∏–ª–∏ –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É (–≤—ã–±–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
  - –†–µ–∑–µ—Ä–≤–Ω—ã–π —Å–ø–∏—Å–æ–∫: –≤—Å–µ–≥–¥–∞ –ø–æ –æ—á–µ—Ä–µ–¥–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (`registration_order`)
- [x] **Drag-and-Drop —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
  - –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –º–µ–∂–¥—É –æ—Å–Ω–æ–≤–Ω—ã–º –∏ —Ä–µ–∑–µ—Ä–≤–Ω—ã–º —Å–ø–∏—Å–∫–∞–º–∏
  - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏–∑ "–ò—â—É –ø–∞—Ä—É" –≤ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ä—ã
  - –í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è "–í —Å–µ—Ç–∫–µ" –¥–ª—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤, —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö –≤ —Ç—É—Ä–Ω–∏—Ä–Ω—É—é —Å–µ—Ç–∫—É
- [x] **–ê–≤—Ç–æ–ø–æ—Å–µ–≤:**
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–æ—Å—Ç–∞–≤–∞ (MAIN_LIST)
  - –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö —Å–∏—Å—Ç–µ–º: –∫—Ä—É–≥–æ–≤–∞—è, –æ–ª–∏–º–ø–∏–π—Å–∫–∞—è, King
- [x] **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –¥–ª—è –≤—Å–µ—Ö —Å–∏—Å—Ç–µ–º —Ç—É—Ä–Ω–∏—Ä–æ–≤:**
  - `TournamentDetailPage.tsx` - –∫—Ä—É–≥–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞
  - `KnockoutPage.tsx` - –æ–ª–∏–º–ø–∏–π—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞
  - `KingPage.tsx` - —Å–∏—Å—Ç–µ–º–∞ King
- [x] **–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤** (`ParticipantPickerModal`):
  - –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∏–≥—Ä–æ–∫–æ–≤, —É–∂–µ —Å–æ—Å—Ç–æ—è—â–∏—Ö –≤ –ø–∞—Ä–∞—Ö (MAIN_LIST/RESERVE_LIST)
  - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–±–æ—Ä–∞ –∏–≥—Ä–æ–∫–æ–≤ –∏–∑ —Å—Ç–∞—Ç—É—Å–∞ LOOKING_FOR_PARTNER
  - –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–∞—Ä –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ —Ç—É—Ä–Ω–∏—Ä

### 6.3. Telegram Mini App (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –°–†–ï–î–ù–ò–ô)

#### Backend (—Å—Ç–∞—Ç—É—Å: –ì–û–¢–û–í–û ‚úÖ)

- [x] –ù–æ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (`my-registration`, `participants`, `register-single`, etc.)
- [x] –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã –¥–ª—è –º–∏–Ω–∏-–∞–ø–ø–∞
- [x] **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ –º–∏–Ω–∏-–∞–ø–ø–µ:**
  - [x] –°—Ç–∞—Ä—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç `POST /api/mini-app/tournaments/{id}/register/` –ø–µ—Ä–µ–ø–∏—Å–∞–Ω —á–µ—Ä–µ–∑ `RegistrationService`
  - [x] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö —Ç—É—Ä–Ω–∏—Ä–æ–≤ (SINGLES) - –≤—ã–∑—ã–≤–∞–µ—Ç `register_single()`
  - [x] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–∞—Ä–Ω—ã—Ö —Ç—É—Ä–Ω–∏—Ä–æ–≤ (DOUBLES):
    - –° –Ω–∞–ø–∞—Ä–Ω–∏–∫–æ–º (`partner_id` —É–∫–∞–∑–∞–Ω) - –≤—ã–∑—ã–≤–∞–µ—Ç `register_with_partner()`
    - –ë–µ–∑ –Ω–∞–ø–∞—Ä–Ω–∏–∫–∞ - –≤—ã–∑—ã–≤–∞–µ—Ç `register_looking_for_partner()`
  - [x] –í–µ—Å—å —Ñ–ª–æ—É –∏–¥—ë—Ç —á–µ—Ä–µ–∑ `TournamentRegistration`, `TournamentEntry` –Ω–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é
  - [x] –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `RegistrationService`:
    - `register()` - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
    - `register_single()` - –¥–ª—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö —Ç—É—Ä–Ω–∏—Ä–æ–≤
    - `register_looking_for_partner()` - —Ä–µ–∂–∏–º "–∏—â—É –ø–∞—Ä—É"
    - `register_with_partner()` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å –Ω–∞–ø–∞—Ä–Ω–∏–∫–æ–º
    - `send_pair_invitation()` - –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
    - `accept_invitation()` - –ø—Ä–∏–Ω—è—Ç–∏–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
    - `decline_invitation()` - –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
    - `leave_pair()` - –≤—ã—Ö–æ–¥ –∏–∑ –ø–∞—Ä—ã
    - `cancel_registration()` - –ø–æ–ª–Ω–∞—è –æ—Ç–º–µ–Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

#### Frontend (—Å—Ç–∞—Ç—É—Å: –ì–û–¢–û–í–û ‚úÖ)

**–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

- [x] **MiniAppTournamentDetail** (`frontend/src/pages/MiniApp/MiniAppTournamentDetail.tsx`):
  - –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç—É—Ä–Ω–∏—Ä–∞ —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
  - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∫–Ω–æ–ø–∫–∞ –≤–Ω–∏–∑—É —ç–∫—Ä–∞–Ω–∞:
    - "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è" ‚Äî –¥–ª—è –Ω–µ–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö
    - "–ù–∞–π—Ç–∏ –Ω–∞–ø–∞—Ä–Ω–∏–∫–∞" ‚Äî –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —Å—Ç–∞—Ç—É—Å–µ `looking_for_partner`
    - "–û—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç —Ç—É—Ä–Ω–∏—Ä–∞" ‚Äî –¥–ª—è –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (`loadTournament` + `loadMyRegistration`)
  - –ö–Ω–æ–ø–∫–∞ "–û—Ç–º–µ–Ω–∏—Ç—å" —Ä—è–¥–æ–º —Å –Ω–∞–¥–ø–∏—Å—å—é "–í—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã" –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª–∫—É –≤—ã–±–æ—Ä–∞

- [x] **RegistrationModal** (`frontend/src/components/MiniApp/RegistrationModal.tsx`):
  - –ú–æ–¥–∞–ª–∫–∞ –≤—ã–±–æ—Ä–∞ —Å–ø–æ—Å–æ–±–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –¥–ª—è –ø–∞—Ä–Ω—ã—Ö —Ç—É—Ä–Ω–∏—Ä–æ–≤
  - –°–∫—Ä—ã–≤–∞–µ—Ç –∫–Ω–æ–ø–∫—É "–ò—â—É –ø–∞—Ä—É" –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –≤ —ç—Ç–æ–º —Å—Ç–∞—Ç—É—Å–µ (`currentStatus === 'looking_for_partner'`)
  - –¢—Ä–∏ —Ä–µ–∂–∏–º–∞:
    - "–ò—â—É –ø–∞—Ä—É" ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ —Ä–µ–∂–∏–º–µ –ø–æ–∏—Å–∫–∞ –Ω–∞–ø–∞—Ä–Ω–∏–∫–∞
    - "–° –Ω–∞–ø–∞—Ä–Ω–∏–∫–æ–º" ‚Äî –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç `PartnerSearchModal`
  - –î–ª—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö —Ç—É—Ä–Ω–∏—Ä–æ–≤ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ—Å—Ç—É—é —Ñ–æ—Ä–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

- [x] **PartnerSearchModal** (`frontend/src/components/MiniApp/PartnerSearchModal.tsx`):
  - –ü–æ–∏—Å–∫ –Ω–∞–ø–∞—Ä–Ω–∏–∫–∞ –ø–æ –§–ò–û —Å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –¥–ª–∏–Ω–æ–π –∑–∞–ø—Ä–æ—Å–∞ 2 —Å–∏–º–≤–æ–ª–∞
  - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å—Ç–æ—Ä–∏–∏ (3 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö + –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–æ 5 –∏–∑ —á–∞—Å—Ç—ã—Ö)
  - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞ BP –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–≥—Ä–æ–∫–∞
  - –ò–Ω–¥–∏–∫–∞—Ü–∏—è –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤ (`is_registered`)
  - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø–æ–ª–µ –ø–æ–∏—Å–∫–∞ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö:
    - –£–º–µ–Ω—å—à–µ–Ω–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã (`px-3`)
    - –†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ `text-base` –¥–ª—è –≤–∏–¥–∏–º–æ—Å—Ç–∏ —Ç–µ–∫—Å—Ç–∞
    - –Ø–≤–Ω—ã–π —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ `text-gray-900`
    - –ö–Ω–æ–ø–∫–∞ "–ù–∞–π—Ç–∏" —Å `flex-shrink-0` –∏ `whitespace-nowrap`

- [x] **CancelRegistrationModal** (`frontend/src/components/MiniApp/CancelRegistrationModal.tsx`):
  - –ú–æ–¥–∞–ª–∫–∞ —Å –≤—ã–±–æ—Ä–æ–º –¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–∏ –æ—Ç–∫–∞–∑–µ –æ—Ç —Ç—É—Ä–Ω–∏—Ä–∞
  - –î–≤–µ –æ–ø—Ü–∏–∏:
    - "–û—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç —Ç–µ–∫—É—â–µ–π –ø–∞—Ä—ã" ‚Äî –æ–±–∞ –∏–≥—Ä–æ–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥—è—Ç –≤ `looking_for_partner`
    - "–ü–æ–∫–∏–Ω—É—Ç—å —Ç—É—Ä–Ω–∏—Ä –ø–æ–ª–Ω–æ—Å—Ç—å—é" ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –Ω–∞–ø–∞—Ä–Ω–∏–∫ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ `looking_for_partner`
  - –û–ø—Ü–∏—è "–û—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç –ø–∞—Ä—ã" –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ `hasPartner === true`

- [x] **TournamentParticipants** (`frontend/src/components/MiniApp/TournamentParticipants.tsx`):
  - –°–ø–∏—Å–∫–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π:
    - –û—Å–Ω–æ–≤–Ω–æ–π —Å–æ—Å—Ç–∞–≤: –ø–æ –∞–ª—Ñ–∞–≤–∏—Ç—É
    - –†–µ–∑–µ—Ä–≤–Ω—ã–π —Å–ø–∏—Å–æ–∫: –ø–æ –æ—á–µ—Ä–µ–¥–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
    - –ò—â—É—Ç –ø–∞—Ä—É: –ø–æ –∞–ª—Ñ–∞–≤–∏—Ç—É
  - –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–∞—Ä –≤ –æ–¥–Ω—É –ø–ª–∏—Ç–∫—É (–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ "–§–ò–û1 / –§–ò–û2" —Å —Ä–µ–π—Ç–∏–Ω–≥–æ–º –ø–∞—Ä—ã)
  - –ö–Ω–æ–ø–∫–∞ "–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å" –¥–ª—è –∏–≥—Ä–æ–∫–æ–≤ –≤ —Å—Ç–∞—Ç—É—Å–µ `looking_for_partner` –∏ –Ω–µ–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö
  - –ò–Ω–¥–∏–∫–∞—Ü–∏—è —Ç–µ–∫—É—â–µ–≥–æ –∏–≥—Ä–æ–∫–∞ –≤ —Å–ø–∏—Å–∫–∞—Ö

- [x] **InvitationsModal** (`frontend/src/components/MiniApp/InvitationsModal.tsx`):
  - –°–ø–∏—Å–æ–∫ –≤—Ö–æ–¥—è—â–∏—Ö –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π –≤ –ø–∞—Ä—É
  - –ö–Ω–æ–ø–∫–∏ "–ü—Ä–∏–Ω—è—Ç—å" –∏ "–û—Ç–∫–ª–æ–Ω–∏—Ç—å" –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –¥–µ–π—Å—Ç–≤–∏–π

**UX —É–ª—É—á—à–µ–Ω–∏—è:**

- [x] –Ø–≤–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏—Ö –º–æ–¥–∞–ª–æ–∫ (–ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –æ–¥–Ω–æ–π –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –¥—Ä—É–≥–∞—è)
- [x] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ `myRegistration` –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- [x] –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –∏ –º–æ–¥–∞–ª–æ–∫ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ä—É—á–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- [x] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (–≤–∏–¥–∏–º–æ—Å—Ç—å —Ç–µ–∫—Å—Ç–∞, —Ä–∞–∑–º–µ—Ä—ã –∫–Ω–æ–ø–æ–∫)
- [x] Haptic feedback –¥–ª—è –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- [x] –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± —É—Å–ø–µ—Ö–µ/–æ—à–∏–±–∫–µ –æ–ø–µ—Ä–∞—Ü–∏–π

### 6.4. Telegram-–±–æ—Ç (—Å—Ç–∞—Ç—É—Å: –ì–û–¢–û–í–û ‚úÖ)

- [x] –ü—Ä–æ—Ñ–∏–ª—å –∏ –ø—Ä–∏–≤—è–∑–∫–∞ `TelegramUser ‚Üî Player`
- [x] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ `apps/telegram_bot/tasks.py`
- [x] **–ü–æ–ª–Ω—ã–π —Ñ–ª–æ—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –±–æ—Ç:**
  - [x] –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (`check_registration`, `get_user_tournaments`) –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `TournamentRegistration`
  - [x] –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Ç—É—Ä–Ω–∏—Ä—ã –≤ –æ–¥–∏–Ω –∫–ª–∏–∫ —á–µ—Ä–µ–∑ `RegistrationService.register_single()`
  - [x] –í—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –¥–ª—è –ø–∞—Ä–Ω—ã—Ö —Ç—É—Ä–Ω–∏—Ä–æ–≤ (–∏—â—É –ø–∞—Ä—É / —Å –Ω–∞–ø–∞—Ä–Ω–∏–∫–æ–º)
  - [x] –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ —Ä–µ–∂–∏–º–µ "–ò—â—É –ø–∞—Ä—É" —á–µ—Ä–µ–∑ `RegistrationService.register_looking_for_partner()`
  - [x] –ü–æ–∏—Å–∫ –Ω–∞–ø–∞—Ä–Ω–∏–∫–∞ –ø–æ –§–ò–û —á–µ—Ä–µ–∑ FSM (Finite State Machine)
  - [x] –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å –Ω–∞–ø–∞—Ä–Ω–∏–∫–æ–º —á–µ—Ä–µ–∑ `RegistrationService.register_with_partner()`
  - [x] –ö–æ–º–∞–Ω–¥–∞ `/myregistration` –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å—Ç–∞—Ç—É—Å–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
  - [x] –û—Ç–º–µ–Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å –≤—ã–±–æ—Ä–æ–º –æ–ø—Ü–∏–π (–≤—ã–π—Ç–∏ –∏–∑ –ø–∞—Ä—ã / –ø–æ–∫–∏–Ω—É—Ç—å —Ç—É—Ä–Ω–∏—Ä)
  - [x] –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `RegistrationService` –¥–ª—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏—è —Å –≤–µ–± –∏ –º–∏–Ω–∏-–∞–ø–ø–æ–º

### 6.5. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- [x] –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç `TOURNAMENT_REGISTRATION.md`
- [x] –û–ø–∏—Å–∞—Ç—å –º–æ–¥–µ–ª–∏, —Å–µ—Ä–≤–∏—Å, —Å–∏–≥–Ω–∞–ª—ã
- [x] –û–ø–∏—Å–∞—Ç—å —Ä–∞–∑—Ä–µ–∑—ã (–∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π/–ø–∞—Ä–Ω—ã–π, –≤–µ–±/–º–∏–Ω–∏-–∞–ø–ø/–±–æ—Ç)
- [x] –°–æ–∑–¥–∞—Ç—å TODO-–ø–ª–∞–Ω —Å —á–µ–∫–±–æ–∫—Å–∞–º–∏
- [ ] **–î–æ–±–∞–≤–∏—Ç—å —Ä–∞–∑–¥–µ–ª "–¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è":**
  - [ ] —á—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –∏–≥—Ä–æ–∫ ¬´–Ω–µ –Ω–∞–π–¥–µ–Ω¬ª (–Ω–µ—Ç —Å–≤—è–∑–∫–∏ user ‚Üî Player)
  - [ ] –∫–∞–∫ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –º–µ–∂–¥—É `TournamentRegistration` –∏ `TournamentEntry`
  - [ ] –∫–∞–∫ –≤—Ä—É—á–Ω—É—é –ø–æ–ø—Ä–∞–≤–∏—Ç—å –ª–∏–º–∏—Ç `planned_participants` –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–µ—Ä–µ—Ä–∞—Å—á—ë—Ç

- [ ] **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
  - [ ] unit-—Ç–µ—Å—Ç—ã –¥–ª—è `RegistrationService`
  - [ ] –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è —Å–∏–≥–Ω–∞–ª–æ–≤ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
  - [ ] E2E —Ç–µ—Å—Ç—ã –¥–ª—è –≤–µ–±-—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
  - [ ] E2E —Ç–µ—Å—Ç—ã –¥–ª—è –º–∏–Ω–∏-–∞–ø–ø–∞

### 6.6. –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç

**–ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–∫–∞–∫ —É–∫–∞–∑–∞–Ω–æ –≤ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è—Ö):**

1. **–°–Ω–∞—á–∞–ª–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≤–µ—Ä—à–∏—Ç—å –≤–µ–±-—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é** (—Ä–∞–∑–¥–µ–ª 6.2)
2. –ó–∞—Ç–µ–º –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –Ω–∞ –º–∏–Ω–∏-–∞–ø–ø (—Ä–∞–∑–¥–µ–ª 6.3)
3. –í –ø–æ—Å–ª–µ–¥–Ω—é—é –æ—á–µ—Ä–µ–¥—å ‚Äî –±–æ—Ç (—Ä–∞–∑–¥–µ–ª 6.4)

**–¢–µ–∫—É—â–∏–π —Ñ–æ–∫—É—Å:** –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –¥–æ—Ä–∞–±–æ—Ç–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –≤–µ–±-—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.
