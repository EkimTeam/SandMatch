# Кинг система (King / Americano)

## Описание

Кинг (Americano/Mexicano) - турнирная система, где пары формируются динамически каждый раунд. Участники играют с разными партнерами и против разных соперников, накапливая личные очки.

**Ключевые особенности:**
- Динамическое формирование пар каждый раунд
- Личный зачет (каждый игрок накапливает очки)
- Балансированный алгоритм для 4-16 участников
- Поддержка нескольких групп
- Кастомные шаблоны расписания

---

## Архитектура

### Backend компоненты

**Сервисы:**
- `apps/tournaments/services/king.py` (431 строка) - генерация расписания
  - `KingMatchGenerator` - класс генератора
  - `generate_king_matches()` - создание матчей для турнира
  - `persist_king_matches()` - сохранение в БД

**API:**
- `apps/tournaments/api_views.py` - endpoints для управления

**Модели:**
- `Tournament` - турнир с system='king'
- `TournamentEntry` - участники (singles only)
- `Match` - матчи с виртуальными Team
- `SchedulePattern` - шаблоны расписания
**Подсчет результатов:**
- Побед подряд (streak)
- Общее количество побед
- Время на корте

## UI/UX
- Таблица с участниками и статистикой
- Текущий матч выделен
- Очередь участников
- История матчей

## Настройки
```python
{
  "system": "king",
  "planned_participants": 10,
  "matches_per_participant": 5  # Минимум игр на участника
}
```
