# –®–ø–∞—Ä–≥–∞–ª–∫–∞: –ü–µ—Ä–µ—Å—á–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥–∞ –Ω–∞ PROD

## ‚ö†Ô∏è –ü–ï–†–ï–î –ù–ê–ß–ê–õ–û–ú

```bash
# 1. –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û! –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –ë–î
pg_dump -U postgres -h localhost -d sandmatch > backup_$(date +%Y%m%d_%H%M%S).sql

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
python manage.py showmigrations

# 3. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (–∏–ª–∏ –≤ —Ä–µ–∂–∏–º–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è)
```

## üöÄ –ö–û–ú–ê–ù–î–´ –î–õ–Ø –í–´–ü–û–õ–ù–ï–ù–ò–Ø

### –í–∞—Ä–∏–∞–Ω—Ç 1: –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–Ω–∞—á–∞–ª–∞)

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —á—Ç–æ –±—É–¥–µ—Ç —Å–¥–µ–ª–∞–Ω–æ –ë–ï–ó –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
python scripts/full_rating_recalculation.py --dry-run
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ—Å—á–µ—Ç

```bash
# –í—ã–ø–æ–ª–Ω–∏—Ç—å –≤—Å–µ —à–∞–≥–∏ —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
python scripts/full_rating_recalculation.py
```

## üìã –ß–¢–û –î–ï–õ–ê–ï–¢ –°–ö–†–ò–ü–¢

1. **–û—á–∏—Å—Ç–∫–∞** - —É–¥–∞–ª—è–µ—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ —Ä–µ–π—Ç–∏–Ω–≥–∞, –æ–±–Ω—É–ª—è–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥–∏ –∏–≥—Ä–æ–∫–æ–≤
2. **BTR —Ä–µ–π—Ç–∏–Ω–≥–∏** - —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥–∏ –ø–æ —Ç–∞–±–ª–∏—Ü–µ BTR‚ÜíBP
3. **–ù–µ-BTR —Ä–µ–π—Ç–∏–Ω–≥–∏** - —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç 1050/1000/950 –ø–æ —É—á–∞—Å—Ç–∏—é –≤ HARD/MEDIUM
4. **–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã** - –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –≤—Å–µ—Ö —Ç—É—Ä–Ω–∏—Ä–æ–≤
5. **–†–µ–π—Ç–∏–Ω–≥–∏ —Ç—É—Ä–Ω–∏—Ä–æ–≤** - –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥ –æ—Ç —Å—Ç–∞—Ä—ã—Ö –∫ –Ω–æ–≤—ã–º

## ‚è±Ô∏è –í–†–ï–ú–Ø –í–´–ü–û–õ–ù–ï–ù–ò–Ø

- –ú–∞–ª–∞—è –ë–î (~100 –∏–≥—Ä–æ–∫–æ–≤, ~20 —Ç—É—Ä–Ω–∏—Ä–æ–≤): **~30 —Å–µ–∫**
- –°—Ä–µ–¥–Ω—è—è –ë–î (~500 –∏–≥—Ä–æ–∫–æ–≤, ~100 —Ç—É—Ä–Ω–∏—Ä–æ–≤): **~3-5 –º–∏–Ω**
- –ë–æ–ª—å—à–∞—è –ë–î (~2000 –∏–≥—Ä–æ–∫–æ–≤, ~500 —Ç—É—Ä–Ω–∏—Ä–æ–≤): **~15-30 –º–∏–Ω**

## üîÑ –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï –ò–ó –†–ï–ó–ï–†–í–ù–û–ô –ö–û–ü–ò–ò

```bash
# –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫
psql -U postgres -h localhost -d sandmatch < backup_YYYYMMDD_HHMMSS.sql
```

## ‚úÖ –ü–†–û–í–ï–†–ö–ê –†–ï–ó–£–õ–¨–¢–ê–¢–ê

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–≥—Ä–æ–∫–æ–≤ —Å —Ä–µ–π—Ç–∏–Ω–≥–æ–º
python manage.py shell
>>> from apps.players.models import Player
>>> Player.objects.filter(current_rating__gt=0).count()

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π —Ä–µ–π—Ç–∏–Ω–≥–∞
>>> from apps.players.models import PlayerRatingDynamic
>>> PlayerRatingDynamic.objects.count()
```

## üìû –ö–û–ù–¢–ê–ö–¢–´ –ü–†–ò –ü–†–û–ë–õ–ï–ú–ê–•

- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏: `tail -f logs/django.log`
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ë–î: `psql -U postgres -c "SELECT version();"`
